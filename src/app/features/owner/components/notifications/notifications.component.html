<<<<<<< HEAD
<p>notifications works!</p>
<div class="notifications-container">
  <!-- Header Section -->
  <div class="header-section">
    <div class="header-content">
      <div class="title-container">
        <div class="header-icon">
          <i class="fas fa-bell"></i>
        </div>
        <div class="header-text">
          <h2 class="header-title">Notifications</h2>
          <p class="header-subtitle">Stay updated with important alerts and reminders</p>
        </div>
      </div>
      
      <div class="header-actions">
        <div class="notification-stats">
          <span class="stat-item unread">
            <i class="fas fa-envelope"></i>
            {{ unreadCount }} Unread
          </span>
          <span class="stat-item total">
            <i class="fas fa-list"></i>
            {{ notifications.length }} Total
          </span>
        </div>
        
        <div class="action-buttons">
          <button class="action-btn btn-secondary" (click)="markAllAsRead()" [disabled]="unreadCount === 0">
            <i class="fas fa-check-double"></i>
            Mark All Read
          </button>
          <button class="action-btn btn-danger" (click)="clearAllNotifications()" [disabled]="notifications.length === 0">
            <i class="fas fa-trash"></i>
            Clear All
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Filter and Search Section -->
  <div class="filters-section">
    <div class="filters-container">
      <div class="filter-controls">
        <div class="search-field">
          <i class="fas fa-search"></i>
          <input type="text" placeholder="Search notifications..." 
                 [(ngModel)]="searchTerm" (input)="filterNotifications()" class="search-input">
        </div>
        
        <div class="filter-tabs">
          <button class="filter-tab" 
                  [class.active]="selectedFilter === 'all'"
                  (click)="setFilter('all')">
            All ({{ notifications.length }})
          </button>
          <button class="filter-tab" 
                  [class.active]="selectedFilter === 'unread'"
                  (click)="setFilter('unread')">
            Unread ({{ unreadCount }})
          </button>
          <button class="filter-tab" 
                  [class.active]="selectedFilter === 'maintenance'"
                  (click)="setFilter('maintenance')">
            Maintenance ({{ getCountByType('maintenance') }})
          </button>
          <button class="filter-tab" 
                  [class.active]="selectedFilter === 'booking'"
                  (click)="setFilter('booking')">
            Bookings ({{ getCountByType('booking') }})
          </button>
          <button class="filter-tab" 
                  [class.active]="selectedFilter === 'system'"
                  (click)="setFilter('system')">
            System ({{ getCountByType('system') }})
          </button>
        </div>
        
        <div class="sort-options">
          <select [(ngModel)]="sortBy" (change)="sortNotifications()" class="sort-select">
            <option value="newest">Newest First</option>
            <option value="oldest">Oldest First</option>
            <option value="priority">Priority</option>
            <option value="type">Type</option>
          </select>
        </div>
      </div>
    </div>
  </div>

  <!-- Notifications List -->
  <div class="notifications-content">
    <div class="notifications-list" *ngIf="filteredNotifications.length > 0">
      <div class="notification-item" 
           *ngFor="let notification of paginatedNotifications; trackBy: trackByNotification"
           [class.unread]="!notification.isRead"
           [class.high-priority]="notification.priority === 'HIGH'"
           [class.medium-priority]="notification.priority === 'MEDIUM'"
           [class.low-priority]="notification.priority === 'LOW'">
        
        <!-- Notification Icon -->
        <div class="notification-icon" [ngClass]="getNotificationIconClass(notification.type)">
          <i [class]="getNotificationIcon(notification.type)"></i>
        </div>
        
        <!-- Notification Content -->
        <div class="notification-content" (click)="markAsRead(notification)">
          <div class="notification-header">
            <h4 class="notification-title">{{ notification.title }}</h4>
            <div class="notification-meta">
              <span class="notification-type" [class]="'type-' + notification.type">
                {{ notification.type | titlecase }}
              </span>
              <span class="notification-time">
                {{ getTimeAgo(notification.createdAt) }}
              </span>
            </div>
          </div>
          
          <p class="notification-message">{{ notification.message }}</p>
          
          <div class="notification-details" *ngIf="notification.vehicleNumber || notification.bookingId">
            <span class="detail-item" *ngIf="notification.vehicleNumber">
              <i class="fas fa-truck"></i>
              {{ notification.vehicleNumber }}
            </span>
            <span class="detail-item" *ngIf="notification.bookingId">
              <i class="fas fa-receipt"></i>
              Booking #{{ notification.bookingId }}
            </span>
          </div>
        </div>
        
        <!-- Notification Actions -->
        <div class="notification-actions">
          <div class="priority-indicator" 
               [class]="'priority-' + notification.priority.toLowerCase()">
            {{ notification.priority }}
          </div>
          
          <div class="action-buttons">
            <button class="action-btn btn-sm" 
                    *ngIf="notification.actionRequired"
                    (click)="handleNotificationAction(notification)">
              <i class="fas fa-external-link-alt"></i>
              View
            </button>
            
            <button class="action-btn btn-sm btn-success" 
                    *ngIf="!notification.isRead"
                    (click)="markAsRead(notification)">
              <i class="fas fa-check"></i>
            </button>
            
            <button class="action-btn btn-sm btn-danger" 
                    (click)="deleteNotification(notification)">
              <i class="fas fa-trash"></i>
            </button>
          </div>
        </div>
      </div>
=======
<div class="notifications-container">
  <div class="header-section">
    <div class="header-left">
      <h2 class="page-title">Notifications</h2>
      <div class="stats-summary">
        <div class="stat-item">
          <span class="stat-value">{{ notificationStats.unreadCount }}</span>
          <span class="stat-label">Unread</span>
        </div>
        <div class="stat-item">
          <span class="stat-value">{{ notificationStats.urgentCount }}</span>
          <span class="stat-label">Urgent</span>
        </div>
        <div class="stat-item">
          <span class="stat-value">{{ notificationStats.actionRequiredCount }}</span>
          <span class="stat-label">Action Required</span>
        </div>
      </div>
    </div>
    
    <div class="header-actions">
      <button class="btn btn-outline-primary" (click)="exportNotifications()">
        <i class="fas fa-download"></i>
        Export
      </button>
      <button class="btn btn-outline-primary" (click)="toggleSettings()">
        <i class="fas fa-cog"></i>
        Settings
      </button>
      <button class="btn btn-primary" (click)="markAllAsRead()">
        <i class="fas fa-check-double"></i>
        Mark All Read
      </button>
    </div>
  </div>

  <!-- Filters and Search -->
  <div class="filters-section">
    <div class="search-box">
      <div class="search-input-wrapper">
        <i class="fas fa-search search-icon"></i>
        <input 
          type="text" 
          class="search-input" 
          placeholder="Search notifications..."
          [(ngModel)]="searchTerm"
          (input)="onSearch()">
      </div>
    </div>

    <div class="filter-buttons">
      <div class="filter-group">
        <span class="filter-label">Status:</span>
        <button 
          class="filter-btn" 
          [class.active]="activeFilter === 'all'"
          (click)="setFilter('all')">
          All ({{ notificationStats.totalNotifications }})
        </button>
        <button 
          class="filter-btn" 
          [class.active]="activeFilter === 'unread'"
          (click)="setFilter('unread')">
          Unread ({{ notificationStats.unreadCount }})
        </button>
        <button 
          class="filter-btn" 
          [class.active]="activeFilter === 'action'"
          (click)="setFilter('action')">
          Action Required ({{ notificationStats.actionRequiredCount }})
        </button>
      </div>

      <div class="filter-group">
        <span class="filter-label">Category:</span>
        <select class="filter-select" [(ngModel)]="activeCategory" (change)="setCategory(activeCategory)">
          <option value="all">All Categories</option>
          <option value="booking">Bookings</option>
          <option value="driver">Drivers</option>
          <option value="vehicle">Vehicles</option>
          <option value="payment">Payments</option>
          <option value="maintenance">Maintenance</option>
          <option value="system">System</option>
        </select>
      </div>

      <div class="filter-group">
        <span class="filter-label">Priority:</span>
        <select class="filter-select" [(ngModel)]="activePriority" (change)="setPriority(activePriority)">
          <option value="all">All Priorities</option>
          <option value="critical">Critical</option>
          <option value="high">High</option>
          <option value="medium">Medium</option>
          <option value="low">Low</option>
        </select>
      </div>

      <button class="btn-clear-filters" (click)="clearFilters()" *ngIf="activeFilter !== 'all' || activeCategory !== 'all' || activePriority !== 'all' || searchTerm">
        <i class="fas fa-times"></i>
        Clear Filters
      </button>
    </div>
  </div>

  <!-- Bulk Actions (visible when notifications are selected) -->
  <div class="bulk-actions" *ngIf="getSelectedCount() > 0">
    <div class="selected-count">
      {{ getSelectedCount() }} notification(s) selected
    </div>
    <div class="bulk-buttons">
      <button class="btn btn-sm btn-outline-primary" (click)="markSelectedAsRead()">
        <i class="fas fa-check"></i>
        Mark as Read
      </button>
      <button class="btn btn-sm btn-outline-danger" (click)="deleteSelected()">
        <i class="fas fa-trash"></i>
        Delete Selected
      </button>
      <button class="btn btn-sm btn-outline-secondary" (click)="deselectAll()">
        <i class="fas fa-times"></i>
        Deselect All
      </button>
    </div>
  </div>

  <!-- Quick Actions -->
  <div class="quick-actions" *ngIf="getSelectedCount() === 0">
    <button class="quick-action-btn" (click)="selectAllVisible()">
      <i class="fas fa-check-square"></i>
      Select All Visible
    </button>
    <button class="quick-action-btn" (click)="setFilter('unread')">
      <i class="fas fa-envelope"></i>
      Show Unread Only
    </button>
    <button class="quick-action-btn" (click)="setFilter('action')">
      <i class="fas fa-exclamation-circle"></i>
      Action Required
    </button>
  </div>

  <!-- Notifications List -->
  <div class="notifications-list">
    <div 
      class="notification-item" 
      *ngFor="let notification of filteredNotifications"
      [class.unread]="!notification.isRead"
      [class.urgent]="notification.priority === 'critical' || notification.priority === 'high'"
      [class.selected]="selectedNotifications.has(notification.id)">
      
      <div class="notification-checkbox">
        <input 
          type="checkbox" 
          [checked]="selectedNotifications.has(notification.id)"
          (change)="selectNotification(notification.id, $event)">
      </div>

      <div class="notification-icon">
        <i [class]="getNotificationIcon(notification)" 
           [style.color]="getTypeColor(notification.type)"></i>
      </div>

      <div class="notification-content" (click)="navigateToEntity(notification)">
        <div class="notification-header">
          <h4 class="notification-title">{{ notification.title }}</h4>
          <div class="notification-meta">
            <span class="notification-time">{{ formatTimestamp(notification.timestamp) }}</span>
            <span class="notification-category">{{ notification.category | titlecase }}</span>
            <span class="priority-badge" [style.background-color]="getPriorityColor(notification.priority)">
              {{ notification.priority | titlecase }}
            </span>
          </div>
        </div>

        <p class="notification-message">{{ notification.message }}</p>

        <div class="notification-footer" *ngIf="notification.relatedEntity || notification.actionRequired">
          <div class="related-entity" *ngIf="notification.relatedEntity">
            <i class="fas fa-link"></i>
            <span>{{ notification.relatedEntity.type | titlecase }}: {{ notification.relatedEntity.name }}</span>
          </div>
          
          <div class="action-required" *ngIf="notification.actionRequired">
            <i class="fas fa-exclamation-triangle"></i>
            <span>Action Required</span>
          </div>
        </div>
      </div>

      <div class="notification-actions">
        <button 
          class="action-btn" 
          [class.read]="notification.isRead"
          (click)="notification.isRead ? markAsUnread(notification.id) : markAsRead(notification.id)"
          [title]="notification.isRead ? 'Mark as Unread' : 'Mark as Read'">
          <i [class]="notification.isRead ? 'fas fa-envelope' : 'fas fa-envelope-open'"></i>
        </button>

        <button 
          class="action-btn primary" 
          *ngIf="notification.actionRequired"
          (click)="handleAction(notification)"
          title="Take Action">
          <i class="fas fa-arrow-right"></i>
        </button>

        <button 
          class="action-btn danger" 
          (click)="deleteNotification(notification.id)"
          title="Delete Notification">
          <i class="fas fa-trash"></i>
        </button>
      </div>
>>>>>>> JRT_ANGULAR_01
    </div>

    <!-- Empty State -->
    <div class="empty-state" *ngIf="filteredNotifications.length === 0">
      <div class="empty-icon">
        <i class="fas fa-bell-slash"></i>
      </div>
      <h3>No notifications found</h3>
<<<<<<< HEAD
      <p *ngIf="searchTerm">Try adjusting your search criteria or filters.</p>
      <p *ngIf="!searchTerm && selectedFilter !== 'all'">
        No {{ selectedFilter }} notifications at the moment.
      </p>
      <p *ngIf="!searchTerm && selectedFilter === 'all'">
        You're all caught up! No notifications to show.
      </p>
    </div>

    <!-- Pagination -->
    <div class="pagination-container" *ngIf="filteredNotifications.length > pageSize">
      <div class="pagination-info">
        Showing {{ getStartIndex() }}-{{ getEndIndex() }} of {{ filteredNotifications.length }} notifications
      </div>
      
      <div class="pagination-controls">
        <button class="page-btn" 
                [disabled]="currentPage === 1" 
                (click)="previousPage()">
          <i class="fas fa-chevron-left"></i>
          Previous
        </button>
        
        <div class="page-numbers">
          <button class="page-number" 
                  *ngFor="let page of getPageNumbers()"
                  [class.active]="page === currentPage"
                  (click)="goToPage(page)">
            {{ page }}
          </button>
        </div>
        
        <button class="page-btn" 
                [disabled]="currentPage === getTotalPages()" 
                (click)="nextPage()">
          Next
          <i class="fas fa-chevron-right"></i>
        </button>
      </div>
    </div>
  </div>

  <!-- Notification Settings Panel (Collapsible) -->
  <div class="settings-panel" [class.expanded]="showSettings">
    <div class="settings-header" (click)="toggleSettings()">
      <h4>
        <i class="fas fa-cog"></i>
        Notification Settings
      </h4>
      <i class="fas fa-chevron-down" [class.rotated]="showSettings"></i>
    </div>
    
    <div class="settings-content" *ngIf="showSettings">
      <div class="setting-group">
        <h5>Email Notifications</h5>
        <label class="setting-item">
          <input type="checkbox" [(ngModel)]="settings.emailMaintenance">
          <span class="checkmark"></span>
          Maintenance reminders
        </label>
        <label class="setting-item">
          <input type="checkbox" [(ngModel)]="settings.emailBookings">
          <span class="checkmark"></span>
          Booking updates
        </label>
        <label class="setting-item">
          <input type="checkbox" [(ngModel)]="settings.emailSystem">
          <span class="checkmark"></span>
          System notifications
        </label>
      </div>
      
      <div class="setting-group">
        <h5>Push Notifications</h5>
        <label class="setting-item">
          <input type="checkbox" [(ngModel)]="settings.pushUrgent">
          <span class="checkmark"></span>
          Urgent alerts only
        </label>
        <label class="setting-item">
          <input type="checkbox" [(ngModel)]="settings.pushAll">
          <span class="checkmark"></span>
          All notifications
        </label>
      </div>
      
      <div class="setting-group">
        <h5>Frequency</h5>
        <select [(ngModel)]="settings.frequency" class="setting-select">
          <option value="immediate">Immediate</option>
          <option value="daily">Daily digest</option>
          <option value="weekly">Weekly summary</option>
        </select>
      </div>
      
      <button class="save-settings-btn" (click)="saveSettings()">
        <i class="fas fa-save"></i>
        Save Settings
=======
      <p *ngIf="activeFilter !== 'all' || activeCategory !== 'all' || activePriority !== 'all' || searchTerm">
        Try adjusting your filters or search terms.
      </p>
      <p *ngIf="activeFilter === 'all' && activeCategory === 'all' && activePriority === 'all' && !searchTerm">
        You're all caught up! No notifications at the moment.
      </p>
      <button class="btn btn-primary" (click)="clearFilters()" *ngIf="activeFilter !== 'all' || activeCategory !== 'all' || activePriority !== 'all' || searchTerm">
        Clear Filters
>>>>>>> JRT_ANGULAR_01
      </button>
    </div>
  </div>

<<<<<<< HEAD
  <!-- Loading State -->
  <div class="loading-overlay" *ngIf="isLoading">
    <div class="loading-spinner">
      <i class="fas fa-spinner fa-spin"></i>
      <p>Loading notifications...</p>
    </div>
  </div>

  <!-- Success/Error Messages -->
  <div class="alert-message" 
       *ngIf="showAlert" 
       [class.success]="!isError" 
       [class.error]="isError">
    <i class="fas" [class.fa-check-circle]="!isError" [class.fa-exclamation-circle]="isError"></i>
    {{ alertMessage }}
    <button class="alert-close" (click)="hideAlert()">
      <i class="fas fa-times"></i>
    </button>
  </div>
</div>
=======
  <!-- Settings Panel -->
  <div class="settings-overlay" *ngIf="showSettings" (click)="showSettings = false">
    <div class="settings-panel" (click)="$event.stopPropagation()">
      <div class="settings-header">
        <h3>Notification Settings</h3>
        <button class="close-btn" (click)="showSettings = false">
          <i class="fas fa-times"></i>
        </button>
      </div>

      <div class="settings-content">
        <div class="settings-group">
          <h4>Delivery Methods</h4>
          <div class="setting-item">
            <label class="setting-label">
              <input type="checkbox" [(ngModel)]="notificationSettings.emailNotifications">
              <span class="checkmark"></span>
              Email Notifications
            </label>
          </div>
          <div class="setting-item">
            <label class="setting-label">
              <input type="checkbox" [(ngModel)]="notificationSettings.smsNotifications">
              <span class="checkmark"></span>
              SMS Notifications
            </label>
          </div>
          <div class="setting-item">
            <label class="setting-label">
              <input type="checkbox" [(ngModel)]="notificationSettings.pushNotifications">
              <span class="checkmark"></span>
              Push Notifications
            </label>
          </div>
        </div>

        <div class="settings-group">
          <h4>Notification Types</h4>
          <div class="setting-item">
            <label class="setting-label">
              <input type="checkbox" [(ngModel)]="notificationSettings.bookingUpdates">
              <span class="checkmark"></span>
              Booking Updates
            </label>
          </div>
          <div class="setting-item">
            <label class="setting-label">
              <input type="checkbox" [(ngModel)]="notificationSettings.driverAlerts">
              <span class="checkmark"></span>
              Driver Alerts
            </label>
          </div>
          <div class="setting-item">
            <label class="setting-label">
              <input type="checkbox" [(ngModel)]="notificationSettings.vehicleAlerts">
              <span class="checkmark"></span>
              Vehicle Alerts
            </label>
          </div>
          <div class="setting-item">
            <label class="setting-label">
              <input type="checkbox" [(ngModel)]="notificationSettings.paymentAlerts">
              <span class="checkmark"></span>
              Payment Alerts
            </label>
          </div>
          <div class="setting-item">
            <label class="setting-label">
              <input type="checkbox" [(ngModel)]="notificationSettings.maintenanceReminders">
              <span class="checkmark"></span>
              Maintenance Reminders
            </label>
          </div>
          <div class="setting-item">
            <label class="setting-label">
              <input type="checkbox" [(ngModel)]="notificationSettings.systemUpdates">
              <span class="checkmark"></span>
              System Updates
            </label>
          </div>
          <div class="setting-item">
            <label class="setting-label">
              <input type="checkbox" [(ngModel)]="notificationSettings.reportDigests">
              <span class="checkmark"></span>
              Daily/Weekly Report Digests
            </label>
          </div>
        </div>
      </div>

      <div class="settings-footer">
        <button class="btn btn-outline-secondary" (click)="showSettings = false">Cancel</button>
        <button class="btn btn-primary" (click)="saveSettings()">Save Settings</button>
      </div>
    </div>
  </div>
</div>
>>>>>>> JRT_ANGULAR_01
