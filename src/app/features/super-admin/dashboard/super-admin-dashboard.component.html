<div class="mobile-overlay" [class.active]="isMobileMenuOpen" (click)="closeMobileMenu()"></div>
<button class="mobile-menu-btn" (click)="toggleMobileMenu()">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
        <rect y="4" width="24" height="3" rx="1.5" fill="currentColor"/>
        <rect y="10.5" width="24" height="3" rx="1.5" fill="currentColor"/>
        <rect y="17" width="24" height="3" rx="1.5" fill="currentColor"/>
    </svg>
</button>

<div class="dashboard-container">
  <!-- Sidebar -->
  <aside class="sidebar" [class.collapsed]="isSidebarCollapsed" [class.mobile-open]="isMobileMenuOpen">
    <div class="sidebar-header">
      <div class="user-section">
        <div class="user-avatar" (click)="triggerProfileUpload()" style="cursor:pointer;">
          <img *ngIf="profileImageUrl" [src]="profileImageUrl" alt="Profile" style="width:100%;height:100%;border-radius:50%;object-fit:cover;" />
          <span *ngIf="!profileImageUrl">SA</span>
        </div>
        <input #profileInput type="file" accept="image/*" (change)="onProfileImageChange($event)" style="display:none;" />
        <div class="user-info">
          <div class="user-name">{{ userFullName }}</div>
          <div class="user-role">{{ userRole }}</div>
        </div>
      </div>
      <button class="collapse-btn" (click)="toggleSidebar()">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
          <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div>

    <!-- Sidebar Navigation -->
    <nav class="sidebar-nav">
      <ul class="nav-list">
        <!-- User Management Parent with 3 children -->
        <li class="nav-item">
          <div class="nav-parent" [class.expanded]="userMenuOpen" (click)="toggleUserMenu()">
            <div class="nav-parent-content">
              <span class="nav-icon"></span>
              <span class="nav-text">User Management</span>
            </div>
            <span class="nav-arrow">â–¼</span>
          </div>
          <ul class="nav-children" [class.expanded]="userMenuOpen">
            <li><a routerLink="admin-management" class="nav-link" (click)="hideWelcome()">Admin Management</a></li>
            <li><a routerLink="owner-management" class="nav-link" (click)="hideWelcome()">Owner Management</a></li>
            <li><a routerLink="customer-management" class="nav-link" (click)="hideWelcome()">Customer Management</a></li>
          </ul>
        </li>
        <li class="nav-item"><a routerLink="approval-management" class="nav-link" (click)="hideWelcome()">Approval Management</a></li>
        <li class="nav-item"><a routerLink="vehicle-management" class="nav-link" (click)="hideWelcome()">Vehicle Management</a></li>
        <li class="nav-item"><a routerLink="consignment-management" class="nav-link" (click)="hideWelcome()">Consignment Management</a></li>
        <li class="nav-item"><a routerLink="payment-management" class="nav-link" (click)="hideWelcome()">Payment Management</a></li>
        <li class="nav-item"><a routerLink="fare-management" class="nav-link" (click)="hideWelcome()">Fare Management</a></li>
        <li class="nav-item"><a routerLink="complaint-management" class="nav-link" (click)="hideWelcome()">Complaint Management</a></li>
        <li class="nav-item"><a routerLink="term-management" class="nav-link" (click)="hideWelcome()">Term Management</a></li>
        <li class="nav-item"><a routerLink="wallet-management" class="nav-link" (click)="hideWelcome()">Wallet Management</a></li>
        <li class="nav-item"><a routerLink="analytics" class="nav-link" (click)="hideWelcome()">Analytics</a></li>
      </ul>
    </nav>

    <!-- Signout -->
    <!-- <div class="signout-section">
      <button class="signout-btn" (click)="signOut()">
        <span>ðŸšª</span>
        <span class="signout-text">Sign Out</span>
      </button>
    </div> -->
  </aside>

  <!-- Right Side -->
  <div class="right-container">
    <!-- Topbar -->
    <app-topbar></app-topbar>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Welcome -->
      <div class="welcome-section" *ngIf="showWelcome">
        <h1 class="welcome-title">Welcome, Super Admin!</h1>
        <p class="welcome-text">
          You have full access to manage users, vehicles, payments, analytics, and system settings.<br>
          Use the sidebar to get started.
        </p>
        <button class="cta-btn" (click)="hideWelcome()">Go to Dashboard</button>
      </div>

      <!-- Router Content -->
      <div class="content-area" *ngIf="!showWelcome">
        <router-outlet></router-outlet>
      </div>
    </main>
  </div>
</div>


