<h1 mat-dialog-title>Add New Vehicle</h1>
<div mat-dialog-content [formGroup]="vehicleForm">
  <p>Please fill out the details for the new vehicle.</p>

  <div class="form-grid">
    <mat-form-field appearance="outline">
      <mat-label>Vehicle Number</mat-label>
      <input matInput formControlName="vehicleNumber" placeholder="e.g., MH 12 AB 1234" required>
      <mat-error *ngIf="vehicleForm.get('vehicleNumber')?.hasError('required')">Vehicle number is required</mat-error>
      <mat-error *ngIf= "vehicleForm.get('vehicleNumber')?.hasError('pattern')">Invalid format</mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Vehicle Type</mat-label>
      <mat-select formControlName="vehicleType" required>
        <mat-option *ngFor="let type of vehicleTypes" [value]="type">
          {{ type }}
        </mat-option>
      </mat-select>
      <mat-error *ngIf="vehicleForm.get('vehicleType')?.hasError('required')">Vehicle type is required</mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Manufacturer</mat-label>
      <input matInput formControlName="manufacturer" required>
      <mat-error *ngIf="vehicleForm.get('manufacturer')?.hasError('required')">Manufacturer is required</mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Model</mat-label>
      <input matInput formControlName="model" required>
      <mat-error *ngIf="vehicleForm.get('model')?.hasError('required')">Model is required</mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Year</mat-label>
      <input matInput type="number" formControlName="year" required>
      <mat-error *ngIf="vehicleForm.get('year')?.hasError('required')">Year is required</mat-error>
      <mat-error *ngIf="vehicleForm.get('year')?.hasError('min') || vehicleForm.get('year')?.hasError('max')">Invalid year</mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Capacity (in tons)</mat-label>
      <input matInput type="number" formControlName="capacity" required>
      <mat-error *ngIf="vehicleForm.get('capacity')?.hasError('required')">Capacity is required</mat-error>
      <mat-error *ngIf="vehicleForm.get('capacity')?.hasError('min')">Capacity must be positive</mat-error>
    </mat-form-field>
  </div>

  <div *ngIf="error" class="error-message">
    {{ error }}
  </div>
</div>

<div mat-dialog-actions align="end">
  <button mat-stroked-button (click)="onCancel()">Cancel</button>
  <button mat-raised-button color="primary" (click)="onSubmit()" [disabled]="isLoading">
    {{ isLoading ? 'Saving...' : 'Save Vehicle' }}
  </button>
</div>
